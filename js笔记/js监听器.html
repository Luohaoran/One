<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script>
    let val = 'tom';
    let person = observable({
        name: 'tom',
        age: 15
    });
    function observable(obj) {
        if (!obj || typeof obj !== 'object') {
            return;
        }
        let keys = Object.keys(obj);
        keys.forEach((key) => {
            defineReactive(obj, key, obj[key])
        });
        return obj;
    }
    /**
     * 将对象的属性用 Object.defineProperty() 进行设置
     */
    function defineReactive(obj, key, val) {
        Object.defineProperty(obj, key, {
            get() {
                console.log(`${key}属性被读取了...`);
                return val;
            },
            set(newVal) {
                console.log(`${key}属性被修改了...`);
                val = newVal;
            }
        })
    }
    console.log(person.age);
</script>
</html>
